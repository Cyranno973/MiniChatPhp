<html>

<head>
    <link href='style.css' rel='stylesheet'>
</head>

<body>
    <div class='page'>
        <div class='header'>
            <div class='header-icon'
                style='background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4yLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8Zz4NCgk8cGF0aCBkPSJNNzMuMywzOTFDNzMuMywzOTEsNzMuMywzOTEsNzMuMywzOTFjMS44LDMsMi44LDYuNCwyLjgsMTAuMkw2NCw0NjRsNTYuMi0yMi4xYzIuNy0xLjEsNS42LTEuNyw4LjctMS43DQoJCWMyLjgsMCw1LjUsMC41LDgsMS40YzAsMCwwLjEsMCwwLjIsMGMwLjQsMC4yLDAuOCwwLjMsMS4yLDAuNWMxNy44LDcuMywzNy40LDExLjQsNTcuOSwxMS40YzQ2LjMsMCw4Ny42LTIwLjUsMTE0LjgtNTIuNg0KCQljLTE0LjEsMy42LTI4LjksNS43LTQ0LjEsNS43Yy05NS45LDAtMTczLjctNzUtMTczLjctMTY3LjVjMC0xMS44LDEuMy0yMy4yLDMuNy0zNC4zQzY2LjksMjMwLjksNDgsMjY4LjYsNDgsMzEwLjYNCgkJYzAsMjguNCw4LjYsNTUuMiwyMy41LDc3LjVDNzIuMSwzODguOSw3Mi43LDM5MCw3My4zLDM5MXoiLz4NCgk8cGF0aCBkPSJNMjkwLjMsNDhjLTgzLjcsMC0xNTMuNiw1Ny4yLTE3MCwxMzMuMmMtMi40LDExLjEtMy43LDIyLjUtMy43LDM0LjNjMCw5Mi41LDc3LjcsMTY3LjUsMTczLjcsMTY3LjUNCgkJYzE1LjMsMCwzMC0yLjEsNDQuMS01LjdjOC4xLTIuMSwxNi4xLTQuNSwyMy44LTcuNmMwLjUtMC4yLDAuOS0wLjQsMS40LTAuNmMwLjEsMCwwLjIsMCwwLjItMC4xYzIuOS0xLjEsNi4xLTEuNyw5LjMtMS43DQoJCWMzLjYsMCw3LDAuNywxMC4xLDJsNjguNiwyNS44bC0xNy03My44YzAtNC40LDEuMi04LjYsMy4zLTEyLjJjMCwwLDAsMCwwLDBjMC42LTEuMSwxLjQtMi4xLDIuMS0zLjENCgkJYzE3LjQtMjYuMSwyNy41LTU3LjIsMjcuNS05MC41QzQ2NCwxMjMsMzg2LjMsNDgsMjkwLjMsNDh6Ii8+DQo8L2c+DQo8L3N2Zz4NCg==)'>
            </div>

            <div class='header-text'> ChatWeb </div>
            <div class='header-icon close'
                style='background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4yLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBkPSJNNDQzLjYsMzg3LjFMMzEyLjQsMjU1LjRsMTMxLjUtMTMwYzUuNC01LjQsNS40LTE0LjIsMC0xOS42bC0zNy40LTM3LjZjLTIuNi0yLjYtNi4xLTQtOS44LTRjLTMuNywwLTcuMiwxLjUtOS44LDQNCglMMjU2LDE5Ny44TDEyNC45LDY4LjNjLTIuNi0yLjYtNi4xLTQtOS44LTRjLTMuNywwLTcuMiwxLjUtOS44LDRMNjgsMTA1LjljLTUuNCw1LjQtNS40LDE0LjIsMCwxOS42bDEzMS41LDEzMEw2OC40LDM4Ny4xDQoJYy0yLjYsMi42LTQuMSw2LjEtNC4xLDkuOGMwLDMuNywxLjQsNy4yLDQuMSw5LjhsMzcuNCwzNy42YzIuNywyLjcsNi4yLDQuMSw5LjgsNC4xYzMuNSwwLDcuMS0xLjMsOS44LTQuMUwyNTYsMzEzLjFsMTMwLjcsMTMxLjENCgljMi43LDIuNyw2LjIsNC4xLDkuOCw0LjFjMy41LDAsNy4xLTEuMyw5LjgtNC4xbDM3LjQtMzcuNmMyLjYtMi42LDQuMS02LjEsNC4xLTkuOEM0NDcuNywzOTMuMiw0NDYuMiwzODkuNyw0NDMuNiwzODcuMXoiLz4NCjwvc3ZnPg0K)'>
            </div>
        </div>
        <div class='body'>



            <?php
        try
        {
            $bdd = new PDO('mysql:host=localhost;dbname=chatopen;charset=utf8', 'olivier', 'aaa', array(PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
        }
        catch (Exception $e)
        {
                die('Erreur : ' . $e->getMessage());
        }

        $reponse = $bdd->query('SELECT * FROM infochat');

        $other = 'other';
        while ($donnees = $reponse->fetch())
        {
            ?>

            <div class='message <?php echo $other ?>'>
                <div class='message-image'> <img src="<?php echo $donnees['avatar']; ?>" alt=""></div>
                <div class='message-body'>
                    <div class='message-user'><?php echo $donnees['username']; ?> </div>
                    <div class='message-text'><?php echo $donnees['contenu']; ?></div>
                    <div class='message-date'><?php echo $donnees['datemessage']; ?> </div>
                </div>
            </div>



            <?php
        // if ($other =='other'){
        //     $other = "";
        // }
        // else{
        //     $other = 'other';
        // };

        $other = ($other)? null : 'other';

                }
        ?>




            <form action="traitement.php" method="post">
                <label for="pseudo">Votre pseudo</label> : <input type="text" required name="pseudo" id="pseudo" />
                <label for="message">Votre message</label> : <input type="text" required name="message" id="message" />
                <input type="submit" value="Envoyer" class="form-button" />

            </form>

        </div>
    </div>
</body>

</html>